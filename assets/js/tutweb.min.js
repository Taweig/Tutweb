/*! tutweb 03-12-2013 */
function loadFeaturedSlider(){getVideos().done(function(a){$(a.result).each(function(){var a=$('<a data-rsw="1140" data-rsh="760"><video id="tutvideo" data-audio-src="'+this.AudioSource+'" class="video-js vjs-default-skin"controls preload="auto" width="100%" height="100%"poster="'+this.Thumbnailsource+'"data-setup="{example_option:true}"><source src="'+this.Videosource+'" type="video/webm" /></video><img class="rsTmb" src="'+this.Thumbnailsource+'"></a>');$("#video-gallery").append(a)}),initializeFeaturedSlider()})}function initializeFeaturedSlider(){$("#video-gallery").royalSlider({arrowsNav:!1,fadeinLoadedSlide:!0,controlNavigationSpacing:0,controlNavigation:"thumbnails",keyboardNavEnabled:!0,imageScaleMode:"fill",imageAlignCenter:!0,slidesSpacing:0,loop:!1,loopRewind:!0,numImagesToPreload:3,sliderDrag:!1,video:{autoHideArrows:!0,autoHideControlNav:!1,autoHideBlocks:!0},thumbs:{appendSpan:!0,firstMargin:!0,paddingBottom:0,spacing:20},autoScaleSlider:!0,autoScaleSliderWidth:1140,autoScaleSliderHeight:760,imgWidth:640,imgHeight:360}),videojs("tutvideo").ready(function(){var a=this;console.log(a.contentEl());var b=document.createElement("audio");b.setAttribute("preload","auto"),b.autobuffer=!0;var c=document.createElement("source");c.type="audio/wav",c.src=$(a.contentEl()).find("> video").data("audio-src"),b.appendChild(c),b.load(),b.volume=1,a.on("volumechange",function(){b.volume=a.volume()}),a.on("play",function(){b.play()}),a.on("pause",function(){b.pause()}),a.on("ended",function(){b.pause()}),a.on("timeupdate",function(){Math.ceil(b.currentTime)!=Math.ceil(a.currentTime())&&(b.currentTime=a.currentTime())})})}function getVideos(){var a=(document.getElementById("tag1").value,document.getElementById("tag2").value,document.getElementById("tag3").value,document.getElementById("YearTag").value,document.getElementById("SettingTag").value,document.getElementById("CharacterTag").value,document.getElementById("slider1").value,document.getElementById("slider2").value,document.getElementById("slider3").value,$.ajax({url:"php/getvideo.php",type:"GET",dataType:"json",success:function(a){console.log(a)}}));return a.fail(function(a,b){alert("Request failed: "+b)}),a}function toggleInfoBubble(a){infoBubble.setContent('<div id="content"><h6>'+a.title+'</h6><p style="font-size:100%;">'+a.description+"</p></div>"),infoBubble.open(map,a)}function initializeMap(){var a=new google.maps.LatLng(52.176,5.75),b=[{elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",stylers:[{visibility:"off"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{}],c={zoom:7,center:a,styles:b};map=new google.maps.Map(document.getElementById("tuthutMap"),c),infoBubble=new InfoBubble({maxWidth:300,content:"bla"}),loadMapMarkers()}function loadMapMarkers(){var a={url:"assets/images/tuthut-marker.png",size:new google.maps.Size(36,50),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(18,50)};$("#tuthutLocations tr").each(function(){var b={};b.lat=$(this).data("lat"),b.lng=$(this).data("lng"),b.title=$(this).data("title"),b.description=$(this).data("description");var c=new google.maps.Marker({position:new google.maps.LatLng(b.lat,b.lng),map:map,title:b.title,description:b.description,icon:a});$(this).click(function(a){return function(){toggleInfoBubble(a)}}(c)),google.maps.event.addListener(c,"click",function(a){return function(){toggleInfoBubble(a)}}(c))})}String.prototype.repeat=function(a){return new Array(a+1).join(this)},function(a){a.widget("ui.customspinner",a.ui.spinner,{widgetEventPrefix:a.ui.spinner.prototype.widgetEventPrefix,_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'></span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'></span></a>"}}),a("#spinner-01, .spinner").customspinner({min:a(this).data("min"),max:a(this).data("max")}).on("focus",function(){a(this).closest(".ui-spinner").addClass("focus")}).on("blur",function(){a(this).closest(".ui-spinner").removeClass("focus")}),a("select").selectpicker({style:"btn-hg btn-primary",menuStyle:"dropdown-inverse"});var b=a(".slider");b.length>0&&b.slider({min:1,max:5,value:3,orientation:"horizontal",slide:function(b,c){a(this).parent().find(".inputNumber").val(c.value)},create:function(){a(this).slider("value",a(this).parent().find(".inputNumber").val())}}),loadFeaturedSlider(),initializeMap()}(jQuery);var map,infoBubble;